
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>OWNER-EX ELITE | MODERN UI</title>
    <script src="https://unpkg.com/lightweight-charts@3.8.0/dist/lightweight-charts.standalone.production.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { 
            --bg: #0b0e11; --panel: #161a1e; --accent: #00ffad; 
            --red: #f6465d; --green: #0ecb81; --border: #2b2f36;
            --radius: 12px; /* Мягкое закругление */
        }
        body, html { margin: 0; padding: 0; height: 100%; background: var(--bg); color: #eaecef; font-family: 'Inter', sans-serif; overflow: hidden; }

        /* HEADER */
        header { 
            height: 65px; background: var(--panel); display: flex; align-items: center; 
            justify-content: space-between; padding: 0 20px; border-bottom: 1px solid var(--border);
        }
        .logo { font-weight: 900; color: var(--accent); letter-spacing: 1px; font-size: 18px; }

        /* КНОПКИ БАЛАНСА */
        .account-switcher { display: flex; background: #000; border-radius: 10px; padding: 3px; border: 1px solid var(--border); }
        .acc-btn { 
            padding: 6px 15px; border: none; background: none; color: #555; 
            cursor: pointer; font-size: 12px; border-radius: 8px; transition: 0.3s;
        }
        .acc-btn.active { background: var(--accent); color: #000; font-weight: bold; box-shadow: 0 0 10px rgba(0, 255, 173, 0.3); }

        /* SIDEBAR */
        .sidebar { 
            background: var(--panel); border-right: 1px solid var(--border); 
            display: flex; flex-direction: column; align-items: center; padding-top: 20px; gap: 25px;
        }
        .side-btn { 
            width: 45px; height: 45px; display: flex; align-items: center; justify-content: center;
            border-radius: var(--radius); color: #848e9c; cursor: pointer; transition: 0.3s; font-size: 18px;
        }
        .side-btn:hover { background: rgba(0, 255, 173, 0.1); color: var(--accent); }
        .side-btn.active { background: var(--accent); color: #000; }

        /* ТЕРМИНАЛ ГРИД */
        .terminal { display: grid; grid-template-columns: 70px 1fr 280px; height: calc(100vh - 65px); }

        /* ГРАФИК И ИСТОРИЯ */
        .main-content { display: flex; flex-direction: column; border-right: 1px solid var(--border); position: relative; }
        #chart { flex: 1; }
        .history-box { 
            height: 180px; background: var(--panel); border-top: 1px solid var(--border); 
            padding: 15px; overflow-y: auto; 
        }
        table { width: 100%; border-collapse: collapse; font-size: 12px; }
        th { text-align: left; color: #848e9c; padding-bottom: 10px; font-weight: 500; }
        td { padding: 8px 0; border-bottom: 1px solid #222; }

        /* ПАНЕЛЬ ТОРГОВЛИ */
        .trade-panel { padding: 20px; display: flex; flex-direction: column; gap: 15px; background: var(--panel); }
        .input-card { 
            background: var(--bg); border: 1px solid var(--border); 
            border-radius: var(--radius); padding: 12px; transition: 0.3s;
        }
        .input-card:focus-within { border-color: var(--accent); }
        .input-card label { display: block; font-size: 11px; color: #848e9c; margin-bottom: 5px; }
        .input-card input { 
            background: transparent; border: none; color: white; width: 100%; 
            outline: none; font-size: 18px; font-weight: bold; 
        }

        .btn-trade { 
            height: 60px; border: none; border-radius: var(--radius); 
            font-weight: 800; font-size: 16px; cursor: pointer; transition: 0.3s;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .btn-up { background: var(--green); color: #000; }
        .btn-up:hover { background: #0be08e; transform: translateY(-2px); }
        .btn-down { background: var(--red); color: #fff; }
        .btn-down:hover { background: #ff4d64; transform: translateY(-2px); }

        /* МОДАЛЬНОЕ ОКНО КАССЫ */
        .modal-overlay { 
            position: fixed; inset: 0; background: rgba(0,0,0,0.8); 
            z-index: 9999; display: none; justify-content: center; align-items: center; backdrop-filter: blur(8px);
        }
        .modal-card { 
            background: var(--panel); border-radius: 20px; border: 1px solid var(--border); 
            width: 380px; padding: 30px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>

<header>
    <div class="logo"><i class="fas fa-chart-line"></i> OWNER-EX PRO</div>
    
    <div style="display:flex; gap:20px; align-items:center;">
        <select id="asset" onchange="changeAsset(this.value)" class="btn-small" style="padding:8px 15px; border-radius:10px;">
            <option value="BTCUSDT">BTC / USDT</option>
            <option value="ETHUSDT">ETH / USDT</option>
        </select>
        
        <div class="account-switcher">
            <button class="acc-btn active" id="btnDemo" onclick="switchAccount('demo')">DEMO</button>
            <button class="acc-btn" id="btnReal" onclick="switchAccount('real')">REAL</button>
        </div>
        
        <div id="displayBal" style="font-weight:bold; color:var(--green); font-size:18px;">$10,000.00</div>
    </div>
</header>

<div class="terminal">
    <div class="sidebar">
        <div class="side-btn active" onclick="alert('График')"><i class="fas fa-layer-group"></i></div>
        <div class="side-btn" onclick="openCashier()"><i class="fas fa-wallet"></i></div>
        <div class="side-btn" onclick="alert('История')"><i class="fas fa-clock-rotate-left"></i></div>
        <div class="side-btn" onclick="alert('Настройки')"><i class="fas fa-user-gear"></i></div>
        <div style="margin-top:auto; margin-bottom:20px;" class="side-btn" onclick="location.reload()"><i class="fas fa-right-from-bracket"></i></div>
    </div>

    <div class="main-content">
        <div id="chart"></div>
        <div class="history-box">
            <h4 style="margin-top:0; font-size:14px; color:var(--accent)">Последние сделки</h4>
            <table>
                <thead><tr><th>Актив</th><th>Направление</th><th>Сумма</th><th>Вход</th><th>Выход</th><th>Доход</th></tr></thead>
                <tbody id="hList"></tbody>
            </table>
        </div>
    </div>

    <div class="trade-panel">
        <div class="input-card">
            <label>СУММА СДЕЛКИ (USDT)</label>
            <input type="number" id="tAmt" value="100">
        </div>
        <div class="input-card">
            <label>СРОК ЭКСПИРАЦИИ (СЕК)</label>
            <input type="number" id="tSec" value="15">
        </div>
        
        <div style="text-align:center; padding:10px;">
            <div style="font-size:12px; color:gray">ДОХОДНОСТЬ</div>
            <div style="font-size:32px; font-weight:900; color:var(--accent)">+82%</div>
        </div>

        <button class="btn-trade btn-up" id="uB" onclick="execTrade('CALL')">
            <i class="fas fa-arrow-trend-up"></i> ВЫШЕ
        </button>
        <button class="btn-trade btn-down" id="dB" onclick="execTrade('PUT')">
            <i class="fas fa-arrow-trend-down"></i> НИЖЕ
        </button>
    </div>
</div>

<div id="cashierModal" class="modal-overlay">
    <div class="modal-card">
        <i class="fas fa-vault" style="font-size:40px; color:var(--accent); margin-bottom:15px;"></i>
        <h3>ПОПОЛНИТЬ БАЛАНС</h3>
        <input type="number" id="depAmount" placeholder="Введите сумму в $" style="padding:15px; border-radius:12px; font-size:18px;">
        <button class="btn-trade btn-up" style="width:100%; height:50px; margin-top:15px;" onclick="confirmDeposit()">
            ПОПОЛНИТЬ СЕЙЧАС
        </button>
        <p style="color:gray; font-size:12px; margin-top:15px; cursor:pointer" onclick="closeCashier()">Вернуться назад</p>
    </div>
</div>

<script>
    let chart, series, curSym = 'BTCUSDT', lastPrice = 0;
    let bals = { demo: 10000, real: 0 };
    let curAcc = 'demo';

    // КАССА
    window.openCashier = () => { document.getElementById('cashierModal').style.display = 'flex'; };
    window.closeCashier = () => { document.getElementById('cashierModal').style.display = 'none'; };
    window.confirmDeposit = () => {
        const a = parseFloat(document.getElementById('depAmount').value);
        if(a > 0) { bals.real += a; updateBalUI(); closeCashier(); }
    };

    // ИНИЦИАЛИЗАЦИЯ
    function init() {
        if(chart) document.getElementById('chart').innerHTML = '';
        chart = LightweightCharts.createChart(document.getElementById('chart'), {
            layout: { background: { color: '#0b0e11' }, textColor: '#848e9c' },
            grid: { vertLines: { color: '#161a1e' }, horzLines: { color: '#161a1e' } },
            crosshair: { mode: LightweightCharts.CrosshairMode.Normal },
            timeScale: { borderColor: '#2b2f36', timeVisible: true, secondsVisible: true }
        });
        series = chart.addCandlestickSeries({ upColor: '#0ecb81', downColor: '#f6465d', borderVisible: false, wickUpColor: '#0ecb81', wickDownColor: '#f6465d' });
        updateData();
    }

    async function updateData() {
        const r = await fetch(`https://api.binance.com/api/v3/klines?symbol=${curSym}&interval=1m&limit=500`);
        const d = await r.json();
        series.setData(d.map(x => ({ time: x[0]/1000, open: +x[1], high: +x[2], low: +x[3], close: +x[4] })));
        
        const ws = new WebSocket(`wss://stream.binance.com:9443/ws/${curSym.toLowerCase()}@kline_1s`);
        ws.onmessage = e => {
            const k = JSON.parse(e.data).k;
            lastPrice = +k.c;
            series.update({ time: k.t/1000, open: +k.o, high: +k.h, low: +k.l, close: lastPrice });
        };
    }

    window.switchAccount = (acc) => {
        curAcc = acc;
        document.getElementById('btnDemo').classList.toggle('active', acc === 'demo');
        document.getElementById('btnReal').classList.toggle('active', acc === 'real');
        updateBalUI();
    };
    function updateBalUI() { document.getElementById('displayBal').innerText = `$${bals[curAcc].toLocaleString()}`; }
    window.changeAsset = (v) => { curSym = v; init(); };

    // ТОРГОВЛЯ
    window.execTrade = (type) => {
        const amt = +document.getElementById('tAmt').value;
        const sec = +document.getElementById('tSec').value;
        if(bals[curAcc] < amt) return alert('Пополните счет!');

        bals[curAcc] -= amt; updateBalUI();
        const startP = lastPrice;
        const line = series.createPriceLine({ price: startP, color: type==='CALL'?'#0ecb81':'#f6465d', lineWidth: 2, title: 'ВХОД' });

        setTimeout(() => {
            const win = (type==='CALL' && lastPrice > startP) || (type==='PUT' && lastPrice < startP);
            const profit = win ? amt * 1.82 : 0;
            bals[curAcc] += profit;

            const row = `<tr><td>${curSym}</td><td style="color:${win?'#0ecb81':'#f6465d'}">${type}</td><td>$${amt}</td><td>${startP}</td><td>${lastPrice}</td><td style="font-weight:bold; color:${win?'#0ecb81':'#f6465d'}">${win?'+$'+(profit-amt).toFixed(2):'-$'+amt}</td></tr>`;
            document.getElementById('hList').insertAdjacentHTML('afterbegin', row);
            series.removePriceLine(line);
            updateBalUI();
        }, sec * 1000);
    };

    init();
</script>
</body>
</html>
