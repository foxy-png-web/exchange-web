<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OWNER-EX PRO TERMINAL</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2220%22 fill=%22%230ecb81%22/><text y=%22.9em%22 font-size=%2280%22 font-weight=%22900%22 x=%2250%%22 text-anchor=%22middle%22 fill=%22%23000%22>E</text></svg>">
    
    <script src="https://unpkg.com/lightweight-charts@3.8.0/dist/lightweight-charts.standalone.production.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');

        :root {
            --bg: #0b0e11;
            --panel: #161a1e;
            --accent: #0ecb81;
            --red: #f6465d;
            --green: #0ecb81;
            --border: #2b2f36;
            --radius: 8px;
        }

        body, html {
            margin: 0; padding: 0;
            background: var(--bg);
            color: #eaecef;
            font-family: 'Inter', sans-serif;
            height: 100%;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* --- AUTH SCREEN --- */
        #authScreen {
            position: fixed; inset: 0; background: var(--bg); z-index: 9999;
            display: flex; align-items: center; justify-content: center;
        }
        .auth-card {
            background: var(--panel); padding: 30px; border-radius: 15px;
            width: 320px; border: 1px solid var(--accent); text-align: center;
            box-shadow: 0 0 20px rgba(14, 203, 129, 0.1);
        }
        .auth-logo { margin-bottom: 20px; font-weight: 800; font-size: 18px; color: var(--accent); letter-spacing: 1px; }
        
        .auth-tabs { display: flex; background: #222; border-radius: 8px; margin-bottom: 20px; padding: 3px; }
        .auth-tab { flex: 1; padding: 8px; font-size: 12px; cursor: pointer; border-radius: 6px; transition: 0.3s; color: #848e9c; }
        .auth-tab.active { background: var(--accent); color: #000; font-weight: 700; }

        /* --- HEADER --- */
        header {
            height: 60px; background: var(--panel);
            border-bottom: 1px solid var(--border);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px; flex-shrink: 0; z-index: 100;
        }
        .header-left { display: flex; align-items: center; gap: 15px; }
        .logo-box { display: flex; align-items: center; gap: 10px; margin-right: 10px; }
        .logo-icon {
            width: 28px; height: 28px; background: var(--accent);
            border-radius: 5px; display: flex; align-items: center; justify-content: center;
            color: #000; font-weight: 900; font-size: 18px;
        }
        .logo-text { font-weight: 800; font-size: 18px; }

        /* Выбор актива как на скриншоте */
        .asset-selector {
            position: relative;
            background: #000;
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .asset-dropdown {
            position: absolute; top: 110%; left: 0;
            background: var(--panel); border: 1px solid var(--border);
            border-radius: 8px; width: 220px; display: none; z-index: 1000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .asset-item {
            padding: 12px; border-bottom: 1px solid #222;
            display: flex; justify-content: space-between; transition: 0.2s;
        }
        .asset-item:hover { background: #2b3035; color: var(--accent); }

        /* Таймфреймы */
        .tf-bar { display: flex; gap: 5px; margin-left: 20px; }
        .tf-btn {
            background: #222; border: 1px solid var(--border); color: #848e9c;
            padding: 5px 12px; border-radius: 4px; font-size: 11px; font-weight: 700;
            cursor: pointer;
        }
        .tf-btn.active { border-color: var(--accent); color: #fff; background: #2b3035; }

        /* --- TERMINAL LAYOUT --- */
        .terminal-container {
            display: grid; grid-template-columns: 60px 1fr 280px;
            flex: 1; min-height: 0;
        }
        .side-nav {
            background: var(--panel); border-right: 1px solid var(--border);
            display: flex; flex-direction: column; align-items: center;
            padding: 20px 0; gap: 25px;
        }
        .nav-item { font-size: 20px; color: #848e9c; cursor: pointer; transition: 0.2s; }
        .nav-item:hover, .nav-item.active { color: var(--accent); }
        .logout-item { margin-top: auto; color: var(--red); margin-bottom: 20px; }

        .chart-section { display: flex; flex-direction: column; background: #000; position: relative; }
        #chart { flex: 1; }

        /* --- NEW CASHIER MODAL (Скриншот 2) --- */
        .cash-modal {
            background: #1c1f22; width: 500px; padding: 0; border-radius: 12px;
            border: 1px solid #333; overflow: hidden;
        }
        .cash-tabs { display: flex; border-bottom: 1px solid #333; }
        .cash-tab {
            flex: 1; padding: 20px; text-align: center; font-weight: 800;
            cursor: pointer; color: #555; font-size: 16px; letter-spacing: 1px;
        }
        .cash-tab.active { color: var(--accent); }
        .cash-content { padding: 30px; }
        
        .method-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px; }
        .method-card {
            background: #111; border: 1px solid #333; border-radius: 8px;
            padding: 20px; text-align: center; cursor: pointer; transition: 0.2s;
        }
        .method-card:hover, .method-card.active { border-color: var(--accent); background: #161a1e; }
        .method-card i { font-size: 24px; color: var(--accent); margin-bottom: 10px; display: block; }
        .method-card span { font-size: 13px; font-weight: 700; }

        .cash-input {
            background: #000; border: 1px solid #333; color: #fff;
            padding: 15px; width: 100%; border-radius: 6px; box-sizing: border-box;
            margin-bottom: 20px; font-size: 16px; outline: none;
        }

        /* --- TRADE PANEL --- */
        .trade-panel { padding: 25px; background: var(--panel); display: flex; flex-direction: column; gap: 15px; }
        .input-group { background: var(--bg); border: 1px solid var(--border); padding: 12px; border-radius: var(--radius); }
        .input-group label { display: block; font-size: 10px; color: #848e9c; margin-bottom: 5px; text-transform: uppercase; }
        .input-group input { background: transparent; border: none; color: #fff; width: 100%; font-size: 18px; font-weight: 700; outline: none; }

        .btn-exec { height: 55px; border: none; border-radius: var(--radius); font-weight: 900; font-size: 16px; cursor: pointer; }
        .btn-call { background: var(--green); color: #000; }
        .btn-put { background: var(--red); color: #fff; }

        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 2000; display: none; justify-content: center; align-items: center; }
    </style>
</head>
<body>

<div id="authScreen">
    <div class="auth-card">
        <div class="auth-logo">OWNER-EX</div>
        <div class="auth-tabs">
            <div class="auth-tab" id="tabRegister" onclick="switchAuthMode('reg')">Регистрация</div>
            <div class="auth-tab active" id="tabLogin" onclick="switchAuthMode('login')">Вход</div>
        </div>
        <input type="email" id="authEmail" class="cash-input" placeholder="Email" style="margin-bottom: 10px;">
        <input type="password" id="authPass" class="cash-input" placeholder="Пароль">
        <button id="authBtn" onclick="handleAuth()" class="btn-exec btn-call" style="width:100%; font-size: 14px;">Начать торговать</button>
    </div>
</div>

<header>
    <div class="header-left">
        <div class="logo-box">
            <div class="logo-icon">E</div>
            <div class="logo-text">OWNER-EX</div>
        </div>
        
        <div class="asset-selector" onclick="toggleAssets()">
            <i class="fab fa-bitcoin" id="currentAssetIcon"></i>
            <span id="currentAssetName">BTC / USDT</span>
            <i class="fas fa-chevron-down" style="font-size: 10px; opacity: 0.5;"></i>
            
            <div class="asset-dropdown" id="assetDropdown">
                <div class="asset-item" onclick="selectAsset('BTCUSDT', 'BTC / USDT', 'fa-bitcoin')">
                    <span><i class="fab fa-bitcoin"></i> BTC / USDT</span> <span style="color:var(--accent)">82%</span>
                </div>
                <div class="asset-item" onclick="selectAsset('ETHUSDT', 'ETH / USDT', 'fa-ethereum')">
                    <span><i class="fab fa-ethereum"></i> ETH / USDT</span> <span style="color:var(--accent)">82%</span>
                </div>
                <div class="asset-item" onclick="selectAsset('SOLUSDT', 'SOL / USDT', 'fa-coins')">
                    <span><i class="fas fa-coins"></i> SOL / USDT</span> <span style="color:var(--accent)">80%</span>
                </div>
                <div class="asset-item" onclick="selectAsset('EURUSDT', 'EUR / USD', 'fa-euro-sign')">
                    <span><i class="fas fa-euro-sign"></i> EUR / USD</span> <span style="color:var(--accent)">85%</span>
                </div>
            </div>
        </div>

        <div class="tf-bar">
            <button class="tf-btn" onclick="changeInterval('1s', this)">S10</button>
            <button class="tf-btn" onclick="changeInterval('1s', this)">S30</button>
            <button class="tf-btn" onclick="changeInterval('1m', this)">M1</button>
            <button class="tf-btn" onclick="changeInterval('5m', this)">M5</button>
            <button class="tf-btn" onclick="changeInterval('10m', this)">M10</button>
            <button class="tf-btn active" onclick="changeInterval('1h', this)">H1</button>
        </div>
    </div>

    <div style="display: flex; align-items: center; gap: 20px;">
        <div style="display:flex; background:#000; padding:4px; border-radius:6px; border:1px solid var(--border);">
            <button class="tf-btn active" id="demoBtn" onclick="switchAcc('demo')">DEMO</button>
            <button class="tf-btn" id="realBtn" onclick="switchAcc('real')">REAL</button>
        </div>
        <div id="balanceDisplay" style="color:var(--accent); font-weight:800; font-size:18px;">$10,000.00</div>
    </div>
</header>

<div class="terminal-container">
    <div class="side-nav">
        <i class="fas fa-chart-line nav-item active"></i>
        <i class="fas fa-wallet nav-item" onclick="openModal('cashierModal')"></i>
        <i class="fas fa-user-circle nav-item" onclick="openModal('profileModal')"></i>
        <i class="fas fa-sign-out-alt nav-item logout-item" onclick="logout()"></i>
    </div>

    <div class="chart-section">
        <div id="chart"></div>
    </div>

    <div class="trade-panel">
        <div class="input-group"><label>Инвестиция (USDT)</label><input type="number" id="tradeAmount" value="100"></div>
        <div class="input-group"><label>Время (Сек)</label><input type="number" id="tradeTime" value="30"></div>
        <button class="btn-exec btn-call" onclick="handleTrade('CALL')">ВЫШЕ ↑</button>
        <button class="btn-exec btn-put" onclick="handleTrade('PUT')">НИЖЕ ↓</button>
    </div>
</div>

<div id="cashierModal" class="modal-overlay">
    <div class="cash-modal">
        <div class="cash-tabs">
            <div class="cash-tab active">ДЕПОЗИТ</div>
            <div class="cash-tab">ВЫВОД</div>
        </div>
        <div class="cash-content">
            <p style="font-size: 12px; color: #848e9c; margin-bottom: 15px;">Выберите способ оплаты:</p>
            <div class="method-grid">
                <div class="method-card active">
                    <i class="fas fa-dollar-sign"></i>
                    <span>USDT TRC20</span>
                </div>
                <div class="method-card">
                    <i class="fas fa-gem"></i>
                    <span>TON</span>
                </div>
                <div class="method-card">
                    <i class="fab fa-bitcoin"></i>
                    <span>Bitcoin</span>
                </div>
                <div class="method-card">
                    <i class="fab fa-ethereum"></i>
                    <span>Ethereum</span>
                </div>
            </div>
            <input type="number" class="cash-input" placeholder="Сумма ($)">
            <button class="btn-exec btn-call" style="width:100%;" onclick="alert('Заявка создана!')">ПРОДОЛЖИТЬ</button>
            <p onclick="closeModals()" style="text-align:center; margin-top:20px; color:#555; cursor:pointer; font-size:12px;">ЗАКРЫТЬ КАССУ</p>
        </div>
    </div>
</div>

<div id="profileModal" class="modal-overlay">
    <div class="auth-card" style="width: 400px;">
        <h3>ПРОФИЛЬ</h3>
        <input type="text" class="cash-input" placeholder="Никнейм">
        <input type="text" class="cash-input" placeholder="Промокод">
        <button class="btn-exec btn-call" style="width:100%;" onclick="closeModals()">СОХРАНИТЬ</button>
    </div>
</div>

<script>
    const TG_TOKEN = "8102627080:AAGGbjyR0g1VzICKb-ait4t3CA34PJz1g5M";
    const TG_USER_ID = 6426834853;

    let bals = JSON.parse(localStorage.getItem('bals')) || { demo: 10000, real: 0 };
    let users = JSON.parse(localStorage.getItem('owner_users')) || {};
    let currentUser = localStorage.getItem('owner_current_user') || null;
    let chart, series, currentAcc = 'demo', lastPrice = 0, currentInterval = '1h', currentSymbol = 'BTCUSDT';

    // --- АВТОРИЗАЦИЯ ---
    function switchAuthMode(mode) {
        document.getElementById('tabRegister').classList.toggle('active', mode === 'reg');
        document.getElementById('tabLogin').classList.toggle('active', mode === 'login');
        document.getElementById('authBtn').innerText = mode === 'reg' ? 'Зарегистрироваться' : 'Начать торговать';
    }

    function handleAuth() {
        const email = document.getElementById('authEmail').value;
        const pass = document.getElementById('authPass').value;
        if(!email || !pass) return alert("Поля пусты!");
        
        if(document.getElementById('tabRegister').classList.contains('active')) {
            users[email] = pass;
            localStorage.setItem('owner_users', JSON.stringify(users));
            alert("Успешно! Теперь войдите.");
            switchAuthMode('login');
        } else {
            if(users[email] === pass) {
                currentUser = email;
                localStorage.setItem('owner_current_user', email);
                document.getElementById('authScreen').style.display = 'none';
                initChart();
            } else alert("Ошибка входа!");
        }
    }

    function logout() { localStorage.removeItem('owner_current_user'); location.reload(); }

    // --- ГРАФИК ---
    function initChart() {
        chart = LightweightCharts.createChart(document.getElementById('chart'), {
            layout: { background: { color: '#000000' }, textColor: '#848e9c' },
            grid: { vertLines: { color: '#111' }, horzLines: { color: '#111' } },
            timeScale: { timeVisible: true, secondsVisible: true }
        });
        series = chart.addCandlestickSeries({ upColor: '#0ecb81', downColor: '#f6465d', borderVisible: false });
        loadData();
        updateUI();
    }

    function loadData() {
        fetch(`https://api.binance.com/api/v3/klines?symbol=${currentSymbol}&interval=${currentInterval}&limit=500`)
            .then(r => r.json()).then(d => {
                series.setData(d.map(x => ({ time: x[0]/1000, open: +x[1], high: +x[2], low: +x[3], close: +x[4] })));
            });
        if(window.ws) window.ws.close();
        window.ws = new WebSocket(`wss://stream.binance.com:9443/ws/${currentSymbol.toLowerCase()}@kline_1s`);
        window.ws.onmessage = e => {
            const k = JSON.parse(e.data).k; lastPrice = +k.c;
            series.update({ time: k.t/1000, open: +k.o, high: +k.h, low: +k.l, close: lastPrice });
        };
    }

    // --- ИНТЕРФЕЙС ---
    function toggleAssets() { const d = document.getElementById('assetDropdown'); d.style.display = d.style.display === 'block' ? 'none' : 'block'; }
    function selectAsset(id, name, icon) {
        currentSymbol = id;
        document.getElementById('currentAssetName').innerText = name;
        document.getElementById('currentAssetIcon').className = `fab ${icon}`;
        toggleAssets(); loadData();
    }

    function changeInterval(val, btn) {
        currentInterval = val;
        document.querySelectorAll('.tf-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        loadData();
    }

    function switchAcc(type) {
        currentAcc = type;
        document.getElementById('demoBtn').classList.toggle('active', type === 'demo');
        document.getElementById('realBtn').classList.toggle('active', type === 'real');
        updateUI();
    }

    function updateUI() {
        document.getElementById('balanceDisplay').innerText = `$${bals[currentAcc].toLocaleString()}`;
    }

    function openModal(id) { document.getElementById(id).style.display = 'flex'; }
    function closeModals() { document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = 'none'); }

    function handleTrade(type) {
        const amt = parseFloat(document.getElementById('tradeAmount').value);
        if(amt > bals[currentAcc]) return alert("Мало денег!");
        bals[currentAcc] -= amt; updateUI();
        setTimeout(() => {
            const win = Math.random() > 0.5;
            if(win) bals[currentAcc] += amt * 1.82;
            updateUI();
            localStorage.setItem('bals', JSON.stringify(bals));
        }, 2000);
    }

    window.onload = () => { if(currentUser) { document.getElementById('authScreen').style.display = 'none'; initChart(); } };
</script>
</body>
</html>
