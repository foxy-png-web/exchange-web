<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>OWNER-EX PRO | OFFICIAL</title>
    <script src="https://unpkg.com/lightweight-charts@3.8.0/dist/lightweight-charts.standalone.production.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { 
            --bg: #0b0e11; --panel: #161a1e; --accent: #00ffad; 
            --red: #f6465d; --green: #0ecb81; --border: #2b2f36;
            --input-bg: #1e2329;
        }
        body, html { margin: 0; padding: 0; height: 100%; background: var(--bg); color: #eaecef; font-family: 'Inter', sans-serif; overflow: hidden; }

        /* –û–ö–ù–û –í–•–û–î–ê –ü–û –°–ö–†–ò–ù–®–û–¢–£ */
        #authOverlay { position: fixed; inset: 0; background: #000; z-index: 10000; display: flex; justify-content: center; align-items: center; }
        .auth-container { 
            background: var(--panel); border: 1px solid var(--accent); 
            border-radius: 20px; width: 320px; padding: 30px; text-align: center;
            box-shadow: 0 0 20px rgba(0, 255, 173, 0.2);
        }
        .auth-tabs { display: flex; background: #111; border-radius: 10px; padding: 4px; margin-bottom: 20px; }
        .auth-tab { flex: 1; padding: 8px; border-radius: 8px; cursor: pointer; font-size: 13px; transition: 0.3s; color: #848e9c; }
        .auth-tab.active { background: var(--accent); color: #000; font-weight: bold; }
        
        .auth-input { 
            width: 100%; background: var(--input-bg); border: 1px solid var(--border); 
            color: #fff; padding: 12px; margin-bottom: 12px; border-radius: 10px; 
            box-sizing: border-box; outline: none;
        }
        .auth-input:focus { border-color: var(--accent); }
        .btn-start { 
            width: 100%; background: var(--accent); color: #000; border: none; 
            padding: 14px; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 10px;
        }

        /* –¢–ï–†–ú–ò–ù–ê–õ */
        header { 
            height: 60px; background: var(--panel); display: flex; align-items: center; 
            justify-content: space-between; padding: 0 20px; border-bottom: 1px solid var(--border);
        }
        .terminal { display: grid; grid-template-columns: 70px 1fr 280px; height: calc(100vh - 60px); }

        /* –ë–û–ö–û–í–ê–Ø –ü–ê–ù–ï–õ–¨ */
        .sidebar { background: var(--panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; align-items: center; padding: 20px 0; gap: 25px; }
        .side-btn { color: #848e9c; font-size: 20px; cursor: pointer; transition: 0.3s; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; border-radius: 12px; }
        .side-btn:hover, .side-btn.active { color: var(--accent); background: rgba(0,255,173,0.1); }
        .logout-btn { margin-top: auto; color: var(--red); }

        /* –ì–†–ê–§–ò–ö */
        .chart-area { display: flex; flex-direction: column; position: relative; border-right: 1px solid var(--border); }
        #chart { flex: 1; }
        .history-panel { height: 180px; background: var(--panel); border-top: 1px solid var(--border); overflow-y: auto; padding: 15px; }

        /* –¢–û–†–ì–û–í–ê–Ø –ü–ê–ù–ï–õ–¨ */
        .trade-panel { padding: 20px; background: var(--panel); display: flex; flex-direction: column; gap: 15px; }
        .input-group { background: var(--bg); border: 1px solid var(--border); border-radius: 12px; padding: 12px; }
        .input-group label { display: block; font-size: 11px; color: #848e9c; margin-bottom: 5px; }
        .input-group input { background: transparent; border: none; color: #fff; width: 100%; font-size: 18px; font-weight: bold; outline: none; }

        .btn-action { height: 60px; border: none; border-radius: 12px; font-weight: 800; cursor: pointer; font-size: 16px; transition: 0.3s; }
        .btn-call { background: var(--green); color: #000; }
        .btn-put { background: var(--red); color: #fff; }
    </style>
</head>
<body>

<div id="authOverlay">
    <div class="auth-container">
        <div style="color:var(--accent); font-weight:bold; margin-bottom:20px; font-size:14px;">OWNER-EX</div>
        <div class="auth-tabs">
            <div class="auth-tab active" id="tabReg" onclick="switchTab('reg')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
            <div class="auth-tab" id="tabLog" onclick="switchTab('log')">–í—Ö–æ–¥</div>
        </div>
        <input type="email" id="authEmail" class="auth-input" placeholder="Email">
        <input type="password" id="authPass" class="auth-input" placeholder="–ü–∞—Ä–æ–ª—å">
        <button class="btn-start" onclick="handleAuth()">–ù–∞—á–∞—Ç—å —Ç–æ—Ä–≥–æ–≤–∞—Ç—å</button>
    </div>
</div>

<header>
    <div style="display:flex; align-items:center; gap:15px;">
        <span style="color:var(--accent); font-weight:900;">OWNER-EX PRO</span>
        <select onchange="window.changeSymbol(this.value)" class="auth-input" style="width:120px; margin:0; padding:5px; font-size:12px;">
            <option value="BTCUSDT">BTC/USDT</option>
            <option value="ETHUSDT">ETH/USDT</option>
            <option value="SOLUSDT">SOL/USDT</option>
        </select>
        <div style="display:flex; gap:5px;">
            <button onclick="window.setChartType('candles')" style="background:#222; border:1px solid #444; color:white; border-radius:4px; padding:4px 8px; cursor:pointer;">üïØÔ∏è</button>
            <button onclick="window.setChartType('area')" style="background:#222; border:1px solid #444; color:white; border-radius:4px; padding:4px 8px; cursor:pointer;">üìà</button>
        </div>
    </div>
    <div style="display:flex; align-items:center; gap:15px;">
        <div style="background:#111; padding:5px 15px; border-radius:8px; border:1px solid var(--border);">
            <span id="balDisplay" style="color:var(--green); font-weight:bold;">$10,000.00</span>
        </div>
    </div>
</header>

<div class="terminal">
    <div class="sidebar">
        <div class="side-btn active"><i class="fas fa-chart-line"></i></div>
        <div class="side-btn" onclick="window.openCashier()"><i class="fas fa-wallet"></i></div>
        <div class="side-btn"><i class="fas fa-clock-rotate-left"></i></div>
        <div class="logout-btn side-btn" onclick="window.logout()"><i class="fas fa-right-from-bracket"></i></div>
    </div>

    <div class="chart-area">
        <div id="chart"></div>
        <div class="history-panel">
            <table style="width:100%; font-size:12px; border-collapse: collapse;">
                <thead><tr style="color:#848e9c; text-align:left;"><th>–ê–∫—Ç–∏–≤</th><th>–¢–∏–ø</th><th>–°—É–º–º–∞</th><th>–î–æ—Ö–æ–¥</th></tr></thead>
                <tbody id="historyList"></tbody>
            </table>
        </div>
    </div>

    <div class="trade-panel">
        <div class="input-group">
            <label>–°–£–ú–ú–ê –ò–ù–í–ï–°–¢–ò–¶–ò–ò</label>
            <input type="number" id="tradeAmt" value="100">
        </div>
        <div class="input-group">
            <label>–°–†–û–ö (–°–ï–ö)</label>
            <input type="number" id="tradeTime" value="30">
        </div>
        <div style="text-align:center; padding:10px;">
            <div style="color:gray; font-size:12px;">–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å</div>
            <div style="color:var(--accent); font-size:28px; font-weight:900;">+82%</div>
        </div>
        <button class="btn-action btn-call" onclick="window.execTrade('CALL')">–í–´–®–ï ‚Üë</button>
        <button class="btn-action btn-put" onclick="window.execTrade('PUT')">–ù–ò–ñ–ï ‚Üì</button>
    </div>
</div>

<script>
    let currentMode = 'reg';
    let chart, series, curSym = 'BTCUSDT', chartType = 'candles';
    let balance = 10000, lastPrice = 0;

    // --- –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø –ü–û –°–ö–†–ò–ù–®–û–¢–£ ---
    window.switchTab = (mode) => {
        currentMode = mode;
        document.getElementById('tabReg').classList.toggle('active', mode === 'reg');
        document.getElementById('tabLog').classList.toggle('active', mode === 'log');
    };

    window.handleAuth = () => {
        const email = document.getElementById('authEmail').value;
        const pass = document.getElementById('authPass').value;
        if(!email || !pass) return alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è');

        if(currentMode === 'reg') {
            localStorage.setItem('user_' + email, pass);
            alert('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –¢–µ–ø–µ—Ä—å –≤–æ–π–¥–∏—Ç–µ.');
            switchTab('log');
        } else {
            const savedPass = localStorage.getItem('user_' + email);
            if(savedPass === pass) {
                document.getElementById('authOverlay').style.display = 'none';
                initChart();
            } else {
                alert('–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤—Ö–æ–¥–∞');
            }
        }
    };

    window.logout = () => { location.reload(); };

    // --- –ì–†–ê–§–ò–ö –ò –¢–û–†–ì–û–í–õ–Ø ---
    function initChart() {
        if(chart) document.getElementById('chart').innerHTML = '';
        chart = LightweightCharts.createChart(document.getElementById('chart'), {
            layout: { background: { color: '#0b0e11' }, textColor: '#848e9c' },
            grid: { vertLines: { color: '#161a1e' }, horzLines: { color: '#161a1e' } },
            timeScale: { borderColor: '#2b2f36', timeVisible: true, secondsVisible: true }
        });

        series = chartType === 'candles' 
            ? chart.addCandlestickSeries({ upColor: '#0ecb81', downColor: '#f6465d' })
            : chart.addAreaSeries({ lineColor: '#00ffad', topColor: 'rgba(0, 255, 173, 0.2)', bottomColor: 'transparent' });

        updateData();
    }

    async function updateData() {
        const r = await fetch(`https://api.binance.com/api/v3/klines?symbol=${curSym}&interval=1m&limit=500`);
        const d = await r.json();
        series.setData(d.map(x => ({ time: x[0]/1000, open: +x[1], high: +x[2], low: +x[3], close: +x[4], value: +x[4] })));
        
        const ws = new WebSocket(`wss://stream.binance.com:9443/ws/${curSym.toLowerCase()}@kline_1s`);
        ws.onmessage = e => {
            const k = JSON.parse(e.data).k;
            lastPrice = +k.c;
            series.update({ time: k.t/1000, open: +k.o, high: +k.h, low: +k.l, close: lastPrice, value: lastPrice });
        };
    }

    window.changeSymbol = (s) => { curSym = s; initChart(); };
    window.setChartType = (t) => { chartType = t; initChart(); };

    window.execTrade = (type) => {
        const amt = +document.getElementById('tradeAmt').value;
        const time = +document.getElementById('tradeTime').value;
        if(balance < amt) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤');

        balance -= amt; updateUI();
        const startPrice = lastPrice;
        const line = series.createPriceLine({ price: startPrice, color: type==='CALL'?'#0ecb81':'#f6465d', lineWidth: 2, title: '–í–•–û–î' });

        setTimeout(() => {
            const win = (type==='CALL' && lastPrice > startPrice) || (type==='PUT' && lastPrice < startPrice);
            const profit = win ? amt * 1.82 : 0;
            balance += profit;
            
            const row = `<tr><td>${curSym}</td><td>${type}</td><td>$${amt}</td><td style="color:${win?'var(--green)':'var(--red)'}">${win?'+$'+(profit-amt).toFixed(2):'-$'+amt}</td></tr>`;
            document.getElementById('historyList').insertAdjacentHTML('afterbegin', row);
            series.removePriceLine(line);
            updateUI();
        }, time * 1000);
    };

    function updateUI() { document.getElementById('balDisplay').innerText = `$${balance.toLocaleString()}`; }
    window.openCashier = () => alert('–ö–∞—Å—Å–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
</script>
</body>
</html>

